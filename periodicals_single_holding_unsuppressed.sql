/*Need to show item barcodes and MMS Ids where 
 - the item is on a suppressed holding or in a temp location 
 - OR (UNION) the item is associated with an unsuppressed holding that has at least one other item not in a temp location.*/
SELECT "Physical Item Details"."Enum A" enum_a, "Physical Item Details"."Internal Note 3" note_3, "Physical Item Details"."Barcode" barcode, "Location"."Location Code" location_code, "Temporary Location"."Temporary Location Code" temp_location, "Bibliographic Details"."MMS Id" mms_id, "Bibliographic Details"."Title" title, "Holding Details"."Holding Id" holding_id FROM "Physical Items" WHERE ((("Physical Item Details"."Enum A" LIKE 'Current Periodicals%') AND ("Physical Item Details"."Lifecycle" = 'Active') AND ("Physical Item Details"."Internal Note 3" LIKE '%JOURNAL USE STUDY%')) AND (("Holding Details"."Suppressed from Discovery" = 1) OR ("Holding Details"."Suppressed from Discovery by Suppressed Location" = 'Yes') OR ("Physical Item Details"."Temporary Physical Location In Use" = 'Yes'))) UNION SELECT curr_per.enum_a, curr_per.note_3, curr_per.barcode, curr_per.location_code, curr_per.temp_location, curr_per.mms_id, curr_per.title, curr_per.holding_id FROM (SELECT "Physical Item Details"."Enum A" enum_a, "Physical Item Details"."Internal Note 3" note_3, "Physical Item Details"."Barcode" barcode, "Location"."Location Code" location_code, "Temporary Location"."Temporary Location Code" temp_location, "Bibliographic Details"."MMS Id" mms_id, "Bibliographic Details"."Title" title, "Holding Details"."Holding Id" holding_id FROM "Physical Items" WHERE ("Physical Item Details"."Enum A" LIKE 'Current Periodicals%') AND ("Physical Item Details"."Lifecycle" = 'Active') AND ("Physical Item Details"."Internal Note 3" LIKE '%JOURNAL USE STUDY%')) curr_per INNER JOIN (SELECT "Holding Details"."Holding Id" holding_id, "Bibliographic Details"."MMS Id" mms_id FROM "Physical Items" WHERE ("Holding Details"."Suppressed from Discovery by Suppressed Location" = 'No') AND ("Holding Details"."Suppressed from Discovery" = 0) AND ("Holding Details"."Holding Lifecycle" = 'Active') AND (FILTER("Physical Item Details"."Num of Items (In Repository)" USING "Physical Item Details"."Temporary Physical Location In Use" = 'No') > 1)) unsup_hold ON (curr_per.holding_id = unsup_hold.holding_id) AND (curr_per.mms_id = unsup_hold.mms_id)

